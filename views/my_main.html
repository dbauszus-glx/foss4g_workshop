<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Dennis Hex App</title>
    <link rel="stylesheet" href="style/{{:engine_css}}"/>
    <link rel="stylesheet" href="style/{{:platform_css}}"/>
    <link rel="stylesheet" href="style/my_main.css"/>
</head>
<body>
    <div id="map" class="map"></div>
    <div class="spacer"></div>
    <div class="ctrl">
        <div id="scrollbar-container">
            <div id="scrollbar"></div>
        </div>
        <div id="content">
        <p>Hex grids help to visualise the demography of a country.</p>
        <p>Select below which indicators should be used for the size and colour of the grid cells.</p>

        <span>Size:</span>
        <select id="grid_size_select"></select>

        <br><br>

        <span>Colour:</span>
        <select id="grid_colour_select"></select>

        <p>Demographic Grid</p>

        <div id="sizeTitle">Population 2001</div>
            <table class="grid_legend">
                <tr>
                    <td class="rotate legend_text_c"></td><td></td><td></td><td></td><td class="rotate legend_text_c"></td><td></td><td></td><td></td><td class="rotate legend_text_c"></td><td></td><td></td>
                </tr>
                <tr>
                    <td><div class="circle_1a9850"></div></td>
                    <td><div class="circle_1a9850"></div></td>
                    <td><div class="circle_1a9850"></div></td>
                    <td><div class="circle_1a9850"></div></td>
                    <td><div class="circle_1a9850"></div></td>
                    <td><div class="circle_1a9850"></div></td>
                    <td><div class="circle_1a9850"></div></td>
                    <td><div class="circle_1a9850"></div></td>
                    <td><div class="circle_1a9850"></div></td>
                    <td> <</td><td><span class="legend_text_v"></span></td>
                </tr>
                <tr>
                    <td><div class="circle_66bd63"></div></td>
                    <td><div class="circle_66bd63"></div></td>
                    <td><div class="circle_66bd63"></div></td>
                    <td><div class="circle_66bd63"></div></td>
                    <td><div class="circle_66bd63"></div></td>
                    <td><div class="circle_66bd63"></div></td>
                    <td><div class="circle_66bd63"></div></td>
                    <td><div class="circle_66bd63"></div></td>
                    <td><div class="circle_66bd63"></div></td>
                    <td> <</td><td class="legend_text_v"></td>
                </tr>
                <tr>
                    <td><div class="circle_a6d96a"></div></td>
                    <td><div class="circle_a6d96a"></div></td>
                    <td><div class="circle_a6d96a"></div></td>
                    <td><div class="circle_a6d96a"></div></td>
                    <td><div class="circle_a6d96a"></div></td>
                    <td><div class="circle_a6d96a"></div></td>
                    <td><div class="circle_a6d96a"></div></td>
                    <td><div class="circle_a6d96a"></div></td>
                    <td><div class="circle_a6d96a"></div></td>
                    <td> <</td><td class="legend_text_v"></td>
                </tr>
                <tr><td><div class="circle_d9ef8b"></div></td>
                    <td><div class="circle_d9ef8b"></div></td>
                    <td><div class="circle_d9ef8b"></div></td>
                    <td><div class="circle_d9ef8b"></div></td>
                    <td><div class="circle_d9ef8b"></div></td>
                    <td><div class="circle_d9ef8b"></div></td>
                    <td><div class="circle_d9ef8b"></div></td>
                    <td><div class="circle_d9ef8b"></div></td>
                    <td><div class="circle_d9ef8b"></div></td>
                    <td> <</td><td class="legend_text_v"></td>
                </tr>
                <tr><td><div class="circle_ffffbf"></div></td>
                    <td><div class="circle_ffffbf"></div></td>
                    <td><div class="circle_ffffbf"></div></td>
                    <td><div class="circle_ffffbf"></div></td>
                    <td><div class="circle_ffffbf"></div></td>
                    <td><div class="circle_ffffbf"></div></td>
                    <td><div class="circle_ffffbf"></div></td>
                    <td><div class="circle_ffffbf"></div></td>
                    <td><div class="circle_ffffbf"></div></td>
                    <td> <</td><td class="legend_text_v"></td>
                </tr>
                <tr><td><div class="circle_fee08b"></div></td>
                    <td><div class="circle_fee08b"></div></td>
                    <td><div class="circle_fee08b"></div></td>
                    <td><div class="circle_fee08b"></div></td>
                    <td><div class="circle_fee08b"></div></td>
                    <td><div class="circle_fee08b"></div></td>
                    <td><div class="circle_fee08b"></div></td>
                    <td><div class="circle_fee08b"></div></td>
                    <td><div class="circle_fee08b"></div></td>
                    <td> <</td><td class="legend_text_v"></td>
                </tr>
                <tr><td><div class="circle_fdae61"></div></td>
                    <td><div class="circle_fdae61"></div></td>
                    <td><div class="circle_fdae61"></div></td>
                    <td><div class="circle_fdae61"></div></td>
                    <td><div class="circle_fdae61"></div></td>
                    <td><div class="circle_fdae61"></div></td>
                    <td><div class="circle_fdae61"></div></td>
                    <td><div class="circle_fdae61"></div></td>
                    <td><div class="circle_fdae61"></div></td>
                    <td> <</td><td class="legend_text_v"></td>
                </tr>
                <tr><td><div class="circle_f46d43"></div></td>
                    <td><div class="circle_f46d43"></div></td>
                    <td><div class="circle_f46d43"></div></td>
                    <td><div class="circle_f46d43"></div></td>
                    <td><div class="circle_f46d43"></div></td>
                    <td><div class="circle_f46d43"></div></td>
                    <td><div class="circle_f46d43"></div></td>
                    <td><div class="circle_f46d43"></div></td>
                    <td><div class="circle_f46d43"></div></td>
                    <td> <</td><td class="legend_text_v"></td>
                </tr>
                <tr><td><div class="circle_d73027"></div></td>
                    <td><div class="circle_d73027"></div></td>
                    <td><div class="circle_d73027"></div></td>
                    <td><div class="circle_d73027"></div></td>
                    <td><div class="circle_d73027"></div></td>
                    <td><div class="circle_d73027"></div></td>
                    <td><div class="circle_d73027"></div></td>
                    <td><div class="circle_d73027"></div></td>
                    <td><div class="circle_d73027"></div></td>
                    <td> <</td><td class="legend_text_v"></td>
                </tr>
            </table>
            <div id="colourTitle">Population 2011</div>

        <div class="chkBox">
            <label class="input-checkbox checkbox-green">
                <input type="checkbox" id="chkGridRatio">
                <span class="checkbox"></span>
            </label>
            <label for="chkGridRatio" class="label">
                Display colour values as a ratio to the size value.
            </label>
        </div>

        <div id="attribution">
            <div>
                <a href="https://www.openstreetmap.org/copyright">
                    OpenStreetMap contributors
                </a>
            </div>
            <div>
                <span>Map tiles: </span>
                <a href="https://carto.com/attribution/">Carto</a>
            </div>
            <div>
                <span>Population grid and demographic data: </span>
                <a href="https://ec.europa.eu/info/legal-notice_en#copyright-notice">
                    European Commission
                </a>
            </div>
        </div>
        </div>
    </div>
</body>
<script type="application/javascript" src="js/{{:engine_js}}"></script>
<script type="application/javascript" src="js/build/{{:my_script_js}}"></script>
<script type="application/javascript">
    let doc = document.getElementById.bind(document),
        container = doc('scrollbar-container'),
        content = doc('content'),
        scrollBar = doc('scrollbar'),
        scrollEvent = new Event('scroll');

    content.addEventListener('scroll', function () {
        scrollBar.style.height = container.clientHeight * content.clientHeight / content.scrollHeight + 'px';
        scrollBar.style.top = container.clientHeight * content.scrollTop / content.scrollHeight + 'px';
    });

    window.addEventListener('resize', content.dispatchEvent.bind(content, scrollEvent));
    content.dispatchEvent(scrollEvent);

    scrollBar.addEventListener('mousedown', function (eDown) {
        eDown.preventDefault();
        let scrollBar_offsetTop = scrollBar.offsetTop,
            eDown_pageY = eDown.pageY,
            onMove = function (eMove) {
                scrollBar.style.top = Math.min(
                        container.clientHeight - scrollBar.clientHeight,
                        Math.max(
                            0,
                            scrollBar_offsetTop + eMove.pageY - eDown_pageY
                        )
                    ) + 'px';
                content.scrollTop = (content.scrollHeight * scrollBar.offsetTop / container.clientHeight);
            };
        document.addEventListener('mousemove', onMove);
        document.addEventListener('mouseup', function () {
            document.removeEventListener('mousemove', onMove);
        });
    });
</script>
</html>